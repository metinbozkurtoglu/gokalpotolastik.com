---
import BaseLayout from './BaseLayout.astro';
import FAQSection from '../components/FAQSection.astro';
import GoogleReviewsStrip from '../components/GoogleReviewsStrip.astro';
import BrandsStrip from '../components/BrandsStrip.astro';
import { siteConfig, services } from '../data/siteConfig';

interface Benefit {
  icon: string;
  title: string;
  desc: string;
}

interface ProcessStep {
  step: string;
  title: string;
  desc: string;
}

interface Stat {
  value: string;
  label: string;
}

interface Props {
  title: string;
  description: string;
  h1: string;
  heroSubtitle: string;
  slug: string;
  heroFeatures?: string[];
  benefits: Benefit[];
  process?: ProcessStep[];
  stats?: Stat[];
  faq: { question: string; answer: string }[];
  relatedSlugs?: string[];
}

const {
  title,
  description,
  h1,
  heroSubtitle,
  slug,
  heroFeatures = [],
  benefits,
  process: processSteps,
  stats,
  faq,
  relatedSlugs,
} = Astro.props;

const breadcrumbs = [
  { name: 'Anasayfa', url: '/' },
  { name: 'Hizmetler', url: '/hizmetler' },
  { name: h1.split('—')[0].split('|')[0].trim().slice(0, 40), url: `/hizmetler/${slug}` },
];

const related = relatedSlugs
  ? services.filter(s => relatedSlugs.includes(s.slug))
  : services.filter(s => s.slug !== slug).slice(0, 3);

// Icon SVG paths map
const iconPaths: Record<string, string> = {
  "shield": `<path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />`,
  "clock": `<path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />`,
  "tools": `<path stroke-linecap="round" stroke-linejoin="round" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.066 2.573c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.573 1.066c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.066-2.573c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" /><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />`,
  "price": `<path stroke-linecap="round" stroke-linejoin="round" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />`,
  "truck": `<path stroke-linecap="round" stroke-linejoin="round" d="M9 17a2 2 0 11-4 0 2 2 0 014 0zM19 17a2 2 0 11-4 0 2 2 0 014 0z" /><path stroke-linecap="round" stroke-linejoin="round" d="M13 16V6a1 1 0 00-1-1H4a1 1 0 00-1 1v10a1 1 0 001 1h1m8-1a1 1 0 01-1 1H9m4-1V8a1 1 0 011-1h2.586a1 1 0 01.707.293l3.414 3.414a1 1 0 01.293.707V16a1 1 0 01-1 1h-1m-6-1a1 1 0 001 1h1M5 17a2 2 0 104 0m-4 0a2 2 0 114 0m6 0a2 2 0 104 0m-4 0a2 2 0 114 0" />`,
  "check": `<path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />`,
  "star": `<path stroke-linecap="round" stroke-linejoin="round" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z" />`,
  "zap": `<path stroke-linecap="round" stroke-linejoin="round" d="M13 10V3L4 14h7v7l9-11h-7z" />`,
  "award": `<path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z" />`,
  "map-pin": `<path stroke-linecap="round" stroke-linejoin="round" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" /><path stroke-linecap="round" stroke-linejoin="round" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />`,
  "refresh": `<path stroke-linecap="round" stroke-linejoin="round" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />`,
  "thermometer": `<path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z" />`,
  "target": `<path stroke-linecap="round" stroke-linejoin="round" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 16c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6zm0-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" />`,
  "wrench": `<path stroke-linecap="round" stroke-linejoin="round" d="M14.7 6.3a1 1 0 000 1.4l1.6 1.6a1 1 0 001.4 0l3.77-3.77a6 6 0 01-7.94 7.94l-6.91 6.91a2.12 2.12 0 01-3-3l6.91-6.91a6 6 0 017.94-7.94l-3.76 3.76z" />`,
  "battery": `<path stroke-linecap="round" stroke-linejoin="round" d="M4 7h16a1 1 0 011 1v8a1 1 0 01-1 1H4a1 1 0 01-1-1V8a1 1 0 011-1zm5-3h2v3H9V4zm4 0h2v3h-2V4z" />`,
  "tire": `<circle cx="12" cy="12" r="10" /><circle cx="12" cy="12" r="6" /><circle cx="12" cy="12" r="2" />`,
  "gauge": `<path stroke-linecap="round" stroke-linejoin="round" d="M3 6l3 1m0 0l-3 9a5.002 5.002 0 006.001 0M6 7l3 9M6 7l6-2m6 2l3-1m-3 1l-3 9a5.002 5.002 0 006.001 0M18 7l3 9m-3-9l-6-2m0-2v2m0 16V5m0 16H9m3 0h3" />`,
  "users": `<path stroke-linecap="round" stroke-linejoin="round" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />`,
  "heart": `<path stroke-linecap="round" stroke-linejoin="round" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />`,
  "phone": `<path stroke-linecap="round" stroke-linejoin="round" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />`,
};

// WhatsApp URL
const whatsappUrl = `https://wa.me/${siteConfig.whatsapp.replace(/\D/g, '')}`;
---

<BaseLayout
  title={title}
  description={description}
  schemaType="service"
  serviceName={h1}
  serviceDescription={description}
  breadcrumbs={breadcrumbs}
  faq={faq}
>

  <!-- ═══════════════════════════════════════════════════ -->
  <!-- HERO SECTION — Modern Dark Design with Video        -->
  <!-- ═══════════════════════════════════════════════════ -->
  <section class="service-hero relative overflow-hidden min-h-[35vh] lg:min-h-[50vh] flex items-end">
    <!-- Video Background -->
    <div class="absolute inset-0">
      <video
        autoplay
        muted
        loop
        playsinline
        poster="/images/hero-poster.webp"
        preload="metadata"
        class="w-full h-full object-cover scale-110"
      >
        <source src="/videos/hero-video.mp4" type="video/mp4" />
      </video>
      <!-- Enhanced Overlays -->
      <div class="absolute inset-0 bg-gradient-to-r from-gray-900/95 via-gray-900/90 to-gray-900/80"></div>
      <div class="absolute inset-0 bg-gradient-to-t from-gray-900 via-gray-900/40 to-transparent"></div>
    </div>

    <!-- Decorative Elements -->
    <div class="absolute inset-0 overflow-hidden pointer-events-none">
      <div class="absolute top-1/4 -left-20 w-96 h-96 bg-primary/20 rounded-full blur-[120px]"></div>
      <div class="absolute bottom-1/3 -right-20 w-72 h-72 bg-blue-500/15 rounded-full blur-[100px]"></div>
      <!-- Grid pattern -->
      <div class="absolute inset-0 opacity-[0.03]" style="background-image: linear-gradient(rgba(255,255,255,0.1) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,0.1) 1px, transparent 1px); background-size: 60px 60px;"></div>
    </div>

    <div class="container-custom relative z-10 py-16 lg:py-20">
      <!-- Breadcrumb -->
      <nav class="mb-6 reveal" aria-label="Breadcrumb">
        <ol class="flex items-center gap-2 text-sm" itemscope itemtype="https://schema.org/BreadcrumbList">
          {breadcrumbs.map((item, index) => (
            <>
              {index > 0 && (
                <li class="text-white/40">
                  <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
                  </svg>
                </li>
              )}
              <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
                {index === breadcrumbs.length - 1 ? (
                  <span class="text-white/60" itemprop="name">{item.name}</span>
                ) : (
                  <a href={item.url} class="text-white/80 hover:text-primary transition-colors" itemprop="item">
                    <span itemprop="name">{item.name}</span>
                  </a>
                )}
                <meta itemprop="position" content={String(index + 1)} />
              </li>
            </>
          ))}
        </ol>
      </nav>

      <div class="grid lg:grid-cols-2 gap-10 lg:gap-16 items-end">
        <!-- Left: Content -->
        <div class="max-w-2xl">
          <!-- Trust Badge -->
          <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r from-primary/20 to-primary/10 border border-primary/30 text-primary text-sm font-semibold mb-6 reveal">
            <span class="w-2 h-2 bg-primary rounded-full animate-pulse"></span>
            7/24 Hizmetinizdeyiz
          </div>

          <h1 class="text-3xl sm:text-4xl lg:text-5xl xl:text-[3.5rem] font-bold text-white leading-[1.1] mb-6 reveal reveal-delay-1">
            {h1}
          </h1>

          <p class="text-white/70 text-lg lg:text-xl max-w-xl leading-relaxed mb-8 reveal reveal-delay-2">
            {heroSubtitle}
          </p>

          <!-- CTA Buttons -->
          <div class="flex flex-wrap items-center gap-4 mb-8 reveal reveal-delay-3">
            <a
              href={`tel:${siteConfig.phone}`}
              class="group inline-flex items-center gap-3 bg-gradient-to-r from-primary to-primary-hover text-white font-bold px-8 py-4 rounded-2xl transition-all shadow-lg shadow-primary/30 hover:shadow-xl hover:shadow-primary/40 hover:scale-[1.02]"
            >
              <div class="w-10 h-10 rounded-xl bg-white/20 flex items-center justify-center group-hover:bg-white/30 transition-colors">
                <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
                </svg>
              </div>
              <div class="text-left">
                <span class="block text-xs text-white/70">Hemen Ara</span>
                <span class="block text-lg">{siteConfig.phoneFormatted}</span>
              </div>
            </a>
            <a
              href={whatsappUrl}
              target="_blank"
              rel="noopener noreferrer"
              class="inline-flex items-center gap-3 bg-[#25D366] hover:bg-[#20BD5A] text-white font-bold px-6 py-4 rounded-2xl transition-all shadow-lg hover:shadow-xl hover:scale-[1.02]"
            >
              <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
              </svg>
              WhatsApp
            </a>
          </div>

          <!-- Hero Feature Badges -->
          {heroFeatures.length > 0 && (
            <div class="flex flex-wrap gap-3 reveal reveal-delay-4">
              {heroFeatures.map(feature => (
                <div class="flex items-center gap-2 bg-white/10 border border-white/20 rounded-full px-4 py-2.5 backdrop-blur-sm hover:bg-white/15 transition-colors">
                  <svg class="w-4 h-4 text-green-400 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
                  </svg>
                  <span class="text-white/90 text-sm font-medium">{feature}</span>
                </div>
              ))}
            </div>
          )}
        </div>

        <!-- Right: Trust Signals Card -->
        <div class="hidden lg:block reveal reveal-delay-3">
          <div class="bg-white/5 backdrop-blur-xl border border-white/10 rounded-3xl p-8">
            <h3 class="text-white font-bold text-lg mb-6">Neden Biz?</h3>

            <div class="space-y-4">
              <!-- Google Rating -->
              <div class="flex items-center gap-4 p-4 bg-white/5 rounded-2xl border border-white/10">
                <div class="w-14 h-14 rounded-2xl bg-gradient-to-br from-yellow-400/20 to-orange-500/20 flex items-center justify-center">
                  <svg class="w-7 h-7 text-yellow-400" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                  </svg>
                </div>
                <div>
                  <div class="flex items-center gap-2">
                    <span class="text-white font-bold text-xl">4.9</span>
                    <div class="flex gap-0.5">
                      {[1,2,3,4,5].map(() => (
                        <svg class="w-4 h-4 text-yellow-400" fill="currentColor" viewBox="0 0 20 20">
                          <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                        </svg>
                      ))}
                    </div>
                  </div>
                  <span class="text-white/60 text-sm">Google Değerlendirmesi</span>
                </div>
              </div>

              <!-- Authorized Dealer -->
              <div class="flex items-center gap-4 p-4 bg-white/5 rounded-2xl border border-white/10">
                <div class="w-14 h-14 rounded-2xl bg-gradient-to-br from-primary/20 to-primary/10 flex items-center justify-center">
                  <svg class="w-7 h-7 text-primary" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
                  </svg>
                </div>
                <div>
                  <span class="text-white font-bold">Yetkili Bayi</span>
                  <span class="text-white/60 text-sm block">Hankook & Bosch</span>
                </div>
              </div>

              <!-- 20+ Years -->
              <div class="flex items-center gap-4 p-4 bg-white/5 rounded-2xl border border-white/10">
                <div class="w-14 h-14 rounded-2xl bg-gradient-to-br from-green-400/20 to-emerald-500/20 flex items-center justify-center">
                  <svg class="w-7 h-7 text-green-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                  </svg>
                </div>
                <div>
                  <span class="text-white font-bold">20+ Yıl Deneyim</span>
                  <span class="text-white/60 text-sm block">2004'ten beri</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>
  </section>


  <!-- ═══════════════════════════════════════════════════ -->
  <!-- GOOGLE REVIEWS — Hero sonrası güven sinyali          -->
  <!-- ═══════════════════════════════════════════════════ -->
  <GoogleReviewsStrip />


  <!-- ═══════════════════════════════════════════════════ -->
  <!-- BRAND LOGOS — Çalıştığımız markalar                  -->
  <!-- ═══════════════════════════════════════════════════ -->
  <BrandsStrip />


  <!-- ═══════════════════════════════════════════════════ -->
  <!-- BENEFITS SECTION — Bento Grid                       -->
  <!-- ═══════════════════════════════════════════════════ -->
  <section class="py-20 lg:py-28 bg-gradient-to-b from-gray-50 to-white relative">
    <div class="container-custom">
      <div class="mb-12 reveal">
        <span class="inline-block w-12 h-1 bg-primary rounded-full mb-4"></span>
        <h2 class="text-h2-mobile lg:text-h2-desktop text-gray-900">
          Neden Bizi Tercih Etmelisiniz?
        </h2>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-4 lg:gap-5">
        {benefits.map((benefit, i) => {
          const styles = [
            { bg: 'bg-primary', text: 'text-white', iconBg: 'bg-white/20', iconText: 'text-white', descText: 'text-white/80', shadow: 'shadow-lg shadow-primary/20' },
            { bg: 'bg-white', text: 'text-gray-900', iconBg: 'bg-blue-50', iconText: 'text-blue-600', descText: 'text-gray-500', shadow: 'border border-gray-100 shadow-sm hover:shadow-lg' },
            { bg: 'bg-white', text: 'text-gray-900', iconBg: 'bg-emerald-50', iconText: 'text-emerald-600', descText: 'text-gray-500', shadow: 'border border-gray-100 shadow-sm hover:shadow-lg' },
            { bg: 'bg-[#0f1729]', text: 'text-white', iconBg: 'bg-white/10', iconText: 'text-amber-400', descText: 'text-gray-400', shadow: 'shadow-lg' },
          ];
          const s = styles[i % styles.length];
          const isWide = i === 0 || ((benefits.length - 1) % 2 === 1 && i === benefits.length - 1);
          return (
            <div class={`group ${s.bg} ${isWide ? 'md:col-span-2' : ''} rounded-2xl p-7 lg:p-9 ${s.shadow} transition-all duration-300 reveal reveal-delay-${Math.min(i + 1, 4)}`}>
              <div class={`flex ${isWide ? 'flex-col sm:flex-row sm:items-start' : 'flex-col'} gap-5`}>
                <div class={`w-14 h-14 rounded-xl ${s.iconBg} flex items-center justify-center flex-shrink-0`}>
                  <svg class={`w-7 h-7 ${s.iconText}`} fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5" set:html={iconPaths[benefit.icon] || iconPaths.check} />
                </div>
                <div>
                  <h3 class={`${s.text} font-bold text-lg mb-2`}>{benefit.title}</h3>
                  <p class={`${s.descText} text-sm leading-relaxed`}>{benefit.desc}</p>
                </div>
              </div>
            </div>
          );
        })}
      </div>
    </div>
  </section>


  <!-- ═══════════════════════════════════════════════════ -->
  <!-- CUSTOM CONTENT — Each page's unique visual sections -->
  <!-- ═══════════════════════════════════════════════════ -->
  <slot />


  <!-- ═══════════════════════════════════════════════════ -->
  <!-- PROCESS / HOW IT WORKS — Split Layout               -->
  <!-- ═══════════════════════════════════════════════════ -->
  {processSteps && processSteps.length > 0 && (
    <section class="py-20 lg:py-28 bg-white relative">
      <div class="container-custom">
        <div class="flex flex-col lg:flex-row gap-12 lg:gap-20">

          {/* ── Sol: Başlık (desktop'ta sticky) ── */}
          <div class="lg:w-[340px] xl:w-[400px] flex-shrink-0 reveal">
            <div class="lg:sticky lg:top-32">
              <span class="inline-block w-12 h-1 bg-primary rounded-full mb-4"></span>
              <h2 class="text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-900 leading-tight mb-4">
                Nasıl Çalışıyoruz?
              </h2>
              <p class="text-gray-500 text-sm leading-relaxed">
                Aradığınız andan aracınız yola çıkana kadar tüm süreç şeffaf ve hızlıdır.
              </p>
            </div>
          </div>

          {/* ── Sağ: Adımlar ── */}
          <div class="flex-1 relative">
            {/* Timeline line */}
            <div class="absolute left-5 lg:left-6 top-0 bottom-0 w-px bg-gradient-to-b from-primary via-gray-200 to-gray-100"></div>

            <div class="space-y-8 lg:space-y-10">
              {processSteps.map((step, i) => (
                <div class={`relative flex gap-5 lg:gap-8 reveal reveal-delay-${Math.min(i + 1, 4)}`}>
                  <div class="relative z-10 flex-shrink-0">
                    <div class="w-10 h-10 lg:w-12 lg:h-12 rounded-full bg-primary flex items-center justify-center shadow-md shadow-primary/20">
                      <span class="text-white font-bold text-sm lg:text-base">{step.step}</span>
                    </div>
                  </div>
                  <div class="pt-1 lg:pt-2">
                    <h3 class="text-gray-900 font-bold text-lg mb-2">{step.title}</h3>
                    <p class="text-gray-500 text-sm leading-relaxed max-w-xl">{step.desc}</p>
                  </div>
                </div>
              ))}
            </div>
          </div>

        </div>
      </div>
    </section>
  )}


  <!-- ═══════════════════════════════════════════════════ -->
  <!-- STATS — Primary Color Strip with Counters           -->
  <!-- ═══════════════════════════════════════════════════ -->
  {stats && stats.length > 0 && (
    <section class="py-14 lg:py-16 bg-primary relative overflow-hidden">
      <div class="absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIj48Y2lyY2xlIGZpbGw9IiNmZmYiIGZpbGwtb3BhY2l0eT0iLjA0IiBjeD0iMzAiIGN5PSIzMCIgcj0iMS41Ii8+PC9nPjwvc3ZnPg==')] opacity-60"></div>

      <div class="container-custom relative">
        <div class={`flex flex-wrap items-center justify-center ${stats.length >= 4 ? 'lg:justify-between' : 'gap-12 lg:gap-20'}`}>
          {stats.map((stat, i) => (
            <div class={`text-center px-6 py-3 reveal reveal-delay-${Math.min(i + 1, 4)} ${i < stats.length - 1 ? 'border-r border-white/20 hidden-divider' : ''}`}>
              <div class="text-white font-bold text-3xl lg:text-5xl leading-none mb-1.5 tracking-tight" data-count>
                {stat.value}
              </div>
              <p class="text-white/70 text-sm font-medium">{stat.label}</p>
            </div>
          ))}
        </div>
      </div>
    </section>
  )}


  <!-- ═══════════════════════════════════════════════════ -->
  <!-- FAQ                                                 -->
  <!-- ═══════════════════════════════════════════════════ -->
  {faq.length > 0 && <FAQSection items={faq} />}



</BaseLayout>

<style>
  @media (max-width: 767px) {
    .hidden-divider {
      border-right: none;
    }
  }
</style>
